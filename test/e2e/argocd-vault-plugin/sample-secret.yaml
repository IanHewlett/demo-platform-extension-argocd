apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: sample-secret
  namespace: argocd

spec:
  project: default

  source:
    path: test/e2e/argocd-vault-plugin/source
    repoURL: https://github.com/IanHewlett/demo-platform-extension-argocd.git

    plugin:
      name: argocd-vault-plugin
      env:
        - name: VAULT_NAMESPACE
          value: admin

  destination:
    server: https://kubernetes.default.svc
    namespace: argocd

  syncPolicy:
    automated: {}
